<?phpif(preg_match('#' . basename(__FILE__) . '#', $_SERVER['PHP_SELF'])) { 	die('You are not allowed to call this page directly.'); }/* Lista de Incrição */function ic_certificado($minicurso){	global $wpdb;	//Predefinidos	$templateVars['{UPDATED}'] = "";	$templateVars['{ERROS}'] = "";	$templateVars['{UPDATED}'] = '<div id="message" class="updated fade"><p><strong>';	if ($ins){		$templateVars['{UPDATED}'] .= "Dados atualizados!";	}else{		$templateVars['{UPDATED}'] .= "Erro ao atualizar dados!";	}	$templateVars['{UPDATED}'] .= "</strong></p></div>";		//Ler arquivo de template usando funções do WP	$info['plugin_fpath'] = dirname(__FILE__); 	$data = file_reader($info['plugin_fpath']."/certificado_tpl.htm");	$admTpl = $data['dados'];	//pegar palavras	$clausula = '';	if($_GET['filtro']=='0'){				if($_GET['s']){ // se tiver o campo de busca preenchido 			$clausula = " AND display_name like '%".$_GET['s']."%' ";		}else{			$clausula = "";		}	}else{		if($_GET['tp']!=""){			$clausula .= " AND " . $_GET['filtro']." like '%".$_GET['tp']."%' ";		}else{			$clausula .= "";		}	}//var_dump($_GET);	$inscritos = split("\|",$minicurso[0]->minicurso_inscritos);			$templateVars['{all}'] = count($inscritos);	$templateVars['{tema}'] = $minicurso[0]->minicurso_tema;//	sort($inscritos);	foreach($inscritos as $valor => $email){	$certificado = split("\|",$minicurso[0]->minicurso_certificado);		$sql10 = "select * from wp_users where user_email=\"".$email."\"";		$getUser = $wpdb->get_results($sql10);		foreach ($getUser as $user1){}		$status = array_search($email, $certificado);		if(trim($certificado[$status]) == trim($email)) { 			$statusOK = 'PRESENTE';		}else{			$statusOK = '';		}		$cont = $valor + 1;		$linhas .='			<tr id=\'post-'.$email.'\' class=\'alternate author-self status-private iedit\' valign="top">				<th scope="row" class="check-column"><input type="hidden" name="minicurso_id" value="'.$_GET['minicurso_id'].'"><input type="checkbox" name="inscrito[]" value="'.$email.'" /></th>				<td style="width:400px;"><strong><a class="row-title" href="?page=ic-inscrito&action=editar_inscrito&ID='.$user1->ID.'" title="Editar &#8220;'.$user1->display_name.'&#8221;">'.$cont.' - '.$user1->display_name.'</a></strong>								<div class="row-actions">					<span class=\'edit\'><a href="?page=ic-inscrito&action=editar_inscrito&ID='.$user1->ID.'" title="Editar esse inscrito">Editar</a></span>  				';								if($statusOK == ''){ $linhas .='| <span class=\'edit\'><a href="?page=ic-minicurso&action=update_certificado&minicurso_id='.$_GET['minicurso_id'].'&inscrito='.$email.'" title="Incluir Certificado">Incluir</a> </span>'; }				else{ $linhas .='| <span class=\'trash\'><a href="?page=ic-minicurso&action=deletar_certificado&minicurso_id='.$_GET['minicurso_id'].'&inscrito='.$email.'" title="Remover Certificado">Remover</a> </span>'; }		$linhas .='							</div>				</td>				<td class="class=\"author column-author\">					'.$email.'				</td>								<td class="post-title column-title">					'.$statusOK.'				</td>			</tr>		';	}		$templateVars['{LINHAS}'] = $linhas;				//Substituir variáveis no template				$admTpl = strtr($admTpl,$templateVars);				echo $admTpl;	 		}?>